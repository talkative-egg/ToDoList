(()=>{"use strict";(()=>{const e=document.querySelector("#content"),t=s({id:"main-content"});let n;function a(e,t){const n=document.createElement(`${e}`);return n.textContent=t,n}function s(e={}){const t=document.createElement("div");return e.id&&(t.id=e.id),e.class&&(t.className=e.class),e.text&&(t.textContent=e.text),t}function i(e,t,n,i=!1){const d=s({class:"task"}),c=s({class:"finish-button"});i&&(c.style.backgroundImage='url("../images/check.png")',c.style.backgroundSize="cover",d.style.backgroundColor="lightgrey"),c.addEventListener("click",(function(){'url("../images/check.png")'===c.style.backgroundImage?(c.style.backgroundImage="none",d.style.backgroundColor="white",events.emit("taskStatus",{taskName:e,status:!1})):(c.style.backgroundImage='url("../images/check.png")',c.style.backgroundSize="cover",d.style.backgroundColor="lightgrey",events.emit("taskStatus",{taskName:e,status:!0}))}));const r=s({class:"task-description"}),o=a("h2",`${e}`),l=a("p",`${t}`);r.appendChild(o),r.appendChild(l);const p=s({class:"due-date"});return p.appendChild(a("p","Due Date:")),p.appendChild(a("p",`${n}`)),d.appendChild(c),d.appendChild(r),d.appendChild(p),d}function d(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function c(e){const t=document.querySelector("#project-container");d(t);const i=a("h1","Projects"),c=document.createElement("hr"),l=s({id:"projects"});Object.values(e).forEach((function(e){if("All Tasks"===e.getName()||e.getName()===n.getName()){const t=s({class:"project",text:`${e.getName()}`});l.appendChild(t)}else{const t=s({id:"delete-project-container"}),n=s({class:"project",text:`${e.getName()}`});n.style.width="90%",n.style.margin="0";const a=document.createElement("img");a.setAttribute("src","../images/delete.png"),a.setAttribute("alt","delete"),a.addEventListener("click",(function(t){events.emit("deleteProject",e.getName())})),t.appendChild(n),t.appendChild(a),l.appendChild(t)}}));const p=document.createElement("img");p.setAttribute("src","../images/confirm.png"),p.setAttribute("alt","confirm"),p.addEventListener("click",(function(t){r(e),o()})),t.appendChild(i),t.appendChild(c),t.appendChild(l),t.appendChild(p),o()}e.appendChild(t);const r=e=>{let n,i=null!=document.querySelector("#project-container");i?(n=document.querySelector("#project-container"),d(n)):n=s({id:"project-container"});const r=a("h1","Projects"),o=document.createElement("hr"),l=s({id:"projects"});Object.values(e).forEach((function(e){const t=s({class:"project",text:`${e.getName()}`});t.addEventListener("click",(function(t){events.emit("renderTasks",e),events.emit("setProjectTab",e)})),l.appendChild(t)}));const p=s({id:"add-button"}),u=document.createElement("img");u.setAttribute("src","../images/add.png"),u.setAttribute("alt",""),p.appendChild(u),p.appendChild(a("h2","Add Project"));const m=s({id:"delete-button"}),g=document.createElement("img");g.setAttribute("src","../images/delete.png"),g.setAttribute("alt",""),m.appendChild(g),m.appendChild(a("h2","Delete Project")),n.appendChild(r),n.appendChild(o),n.appendChild(l),n.appendChild(p),n.appendChild(m),p.addEventListener("click",(function(e){const t=s({id:"new-project"});p.style.display="none",m.style.display="none";const a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("placeholder","Project Name");const i=document.createElement("img");i.setAttribute("src","../images/confirm.png"),i.setAttribute("alt","confirm"),i.addEventListener("click",(function(e){""!==a.value&&events.emit("newProject",a.value)})),t.appendChild(a),t.appendChild(i),n.appendChild(t)})),m.addEventListener("click",(function(t){c(e)})),i||t.prepend(n)};function o(e=n){const t=document.querySelectorAll(".project");let a=!1;t.forEach((function(t){t.textContent==e.getName()?(t.classList.add("currentTab"),a=!0,n=e):t.classList.remove("currentTab")})),a||(t[0].style.boxShadow="none",n=t[0])}function l(e,t){const n=document.createElement("label");return n.textContent=t,n.setAttribute("for",e),n}function p(e,t,n,a){const s=document.createElement("input");return s.setAttribute("type",e),s.setAttribute("placeholder",t),s.setAttribute("name",n),s.id=n,s.required=a,s}function u(t){const n=s({id:"myForm"}),i=document.createElement("form");i.id="form-container";const d=a("h1","New Task"),c=l("title","Task Name: "),r=p("text","Task Name","title",!0),o=l("description","Task Description: "),u=document.createElement("textarea");u.setAttribute("placeholder","Task Descripiton"),u.setAttribute("name","description"),u.id="description";const m=l("dueDate","Due Date: "),g=p("date","","dueDate",!0),h=s({id:"buttons"}),k=document.createElement("img");k.setAttribute("src","../images/confirm.png"),k.setAttribute("alt","confirm");const C=document.createElement("img");C.setAttribute("src","../images/cancel.png"),C.setAttribute("alt","cancel"),h.appendChild(k),h.appendChild(C),i.appendChild(d),i.appendChild(c),i.appendChild(document.createElement("br")),i.appendChild(r),i.appendChild(document.createElement("br")),i.appendChild(o),i.appendChild(document.createElement("br")),i.appendChild(u),i.appendChild(document.createElement("br")),i.appendChild(m),i.appendChild(document.createElement("br")),i.appendChild(g),i.appendChild(document.createElement("br")),i.appendChild(h),n.appendChild(i),e.appendChild(n),k.addEventListener("click",(function(a){t.containsTask(r.value)?alert("already has this task"):""!=r.value?(events.emit("newTask",{title:r.value,description:u.value,dueDate:g.value,project:t.getName()}),e.removeChild(n)):alert("must have a title")})),C.addEventListener("click",(function(t){e.removeChild(n)}))}function m(e,t){const n=document.querySelector("#task-container");d(n);const c=a("h1",`${e.getName()}`),r=document.createElement("hr"),o=s({id:"tasks"});Object.values(e.getTasks()).forEach((function(n){let d;if(n.getTitle()==t.getTitle()){d=s({class:"task"});const i=s({class:"finish-button"});n.getStatus()&&(i.style.backgroundImage='url("../images/check.png")',i.style.backgroundSize="cover",d.style.backgroundColor="lightgrey"),i.addEventListener("click",(function(){'url("../images/check.png")'===i.style.backgroundImage?(i.style.backgroundImage="none",d.style.backgroundColor="white",events.emit("taskStatus",{taskName,status:!1})):(i.style.backgroundImage='url("../images/check.png")',i.style.backgroundSize="cover",d.style.backgroundColor="lightgrey",events.emit("taskStatus",{taskName,status:!0}))}));const c=s({id:"input-container"}),r=s({class:"task-description",id:"text-edit"}),o=p("text","Task Title","title",!0);o.value=t.getTitle();const l=document.createElement("textarea");l.setAttribute("placeholder","Task Description"),l.id="description",l.value=t.getDescription(),r.appendChild(o),r.appendChild(l);const u=s({class:"due-date",id:"date-edit"}),m=p("date","","dueDate",!1);u.appendChild(a("p","Due Date:")),u.appendChild(m),c.appendChild(r),c.appendChild(u);const g=s({id:"buttons"}),h=document.createElement("img");h.setAttribute("src","../images/delete.png"),h.setAttribute("alt","Delete");const k=document.createElement("img");k.setAttribute("src","../images/confirm.png"),k.setAttribute("alt","confirm"),g.appendChild(h),g.appendChild(k),h.addEventListener("click",(function(){events.emit("deleteTask",{project:e,title:n.getTitle()})})),k.addEventListener("click",(function(){events.emit("setTask",{project:e,originalTitle:t.getTitle(),title:o.value,description:l.value,dueDate:m.value})})),d.appendChild(i),d.appendChild(c),d.appendChild(g)}else d=i(n.getTitle(),n.getDescription(),n.getDueDate(),n.getStatus()),d.addEventListener("click",(function(t){"finish-button"!==t.target.className&&m(e,n)}));o.appendChild(d)}));const l=s({id:"add-button"}),g=document.createElement("img");g.setAttribute("src","../images/add.png"),g.setAttribute("alt","New Task"),l.appendChild(g),l.appendChild(a("h2","New Task")),o.appendChild(l),n.appendChild(c),n.appendChild(r),n.appendChild(o),l.addEventListener("click",(function(t){document.querySelector("#myForm")||u(e)}))}events.on("init",(()=>{const t=document.createElement("nav"),n=s(),i=document.createElement("img");i.setAttribute("src","../images/icon.png"),i.setAttribute("alt","logo"),n.appendChild(i),n.appendChild(a("p","ToDoList")),t.appendChild(n),t.appendChild(a("p","Peter Chen")),e.prepend(t)})),events.on("renderProjects",r),events.on("renderTasks",((e=n)=>{let c,r=null!=document.querySelector("#task-container");r?(c=document.querySelector("#task-container"),d(c)):c=s({id:"task-container"});const o=a("h1",`${e.getName()}`),l=document.createElement("hr"),p=s({id:"tasks"});Object.values(e.getTasks()).forEach((function(t){const n=i(t.getTitle(),t.getDescription(),t.getDueDate(),t.getStatus());n.addEventListener("click",(function(n){"finish-button"!==n.target.className&&m(e,t)})),p.appendChild(n)}));const g=s({id:"add-button"}),h=document.createElement("img");h.setAttribute("src","../images/add.png"),h.setAttribute("alt","New Task"),g.appendChild(h),g.appendChild(a("h2","New Task")),p.appendChild(g),c.appendChild(o),c.appendChild(l),c.appendChild(p),g.addEventListener("click",(function(t){document.querySelector("#myForm")||u(e)})),r||t.appendChild(c)})),events.on("setProjectTab",o),events.on("renderDeleteProjects",c)})();const e=e=>{const t={},n=e;return{addTask:(e,n)=>{t[e]=n},setTaskProperty:(e,n)=>{t[e].setProperty(n),e!==n.title&&(t[n.title]=t[e],delete t[e])},setTaskStatus:(e,n)=>{t[e].setStatus(n)},deleteTask:e=>{void 0!==t[e]&&delete t[e]},containsTask:e=>!!t[e],getName:()=>n,getTasks:()=>t}};(()=>{const t={},n=e("All Tasks"),a=a=>{const s=e(a);t[a]=s,events.emit("renderProjects",Object.assign({},{defaultProject:n,...t})),events.emit("setProjectTab",Object.assign({},t[a])),events.emit("renderTasks",Object.assign({},t[a]))},s=({title:e,description:a,dueDate:s,project:i})=>{const d=((e,t,n)=>{let a=e,s=t,i=n,d=!1;return{setProperty:e=>{for(let t in e)switch(t){case"title":a=e[t];break;case"description":s=e[t];break;case"dueDate":i=e[t]}},setStatus:e=>{d=e},getTitle:()=>a,getDescription:()=>s,getDueDate:()=>i,getStatus:()=>d}})(e,a,s);n.addTask(e,d),t[i]?(t[i].addTask(e,d),events.emit("renderTasks",Object.assign({},t[i]))):events.emit("renderTasks",Object.assign({},n))};events.on("init",(()=>{s({title:"example1",description:"Lorem ipsum dolor sit Amet",dueDate:"today",project:""}),s({title:"example2",description:"Lorem ipsum dolor sit Amet",dueDate:"today",project:""}),a("Sample Project"),s({title:"example3",description:"Lorem ipsum dolor sit Amet",dueDate:"today",project:"Sample Project"}),events.emit("renderProjects",Object.assign({},{defaultProject:n,...t})),events.emit("renderTasks",Object.assign({},n)),events.emit("setProjectTab",Object.assign({},n))})),events.on("newProject",a),events.on("deleteProject",(e=>{void 0!==t[e]&&delete t[e],events.emit("renderDeleteProjects",Object.assign({},{defaultProject:n,...t}))})),events.on("newTask",s),events.on("taskStatus",(e=>{n.setTaskStatus(e.taskName,e.status)})),events.on("deleteTask",(e=>{n.deleteTask(e.title),Object.values(t).forEach((function(t){t.deleteTask(e.title)}));const a=t[e.project.getName()]?t[e.project.getName()]:n;events.emit("renderTasks",a)})),events.on("setTask",(e=>{n.setTaskProperty(e.originalTitle,e);const a=t[e.project.getName()]?t[e.project.getName()]:n;events.emit("renderTasks",a)}))})(),events.emit("init")})();